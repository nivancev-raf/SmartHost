<header class="main-header" [class.transparent]="isHeroVisible">
  <div class="header-content">
    <div class="logo">
      <a routerLink="/">
        <img src="images/logo-dark-removebg.png" alt="SmartHost Logo" class="logo-image logo-dark">
        <img src="images/logo-light-removebg.png" alt="SmartHost Logo" class="logo-image logo-light">
        <span class="logo-text">SmartHost</span>
      </a>
    </div>

    <!-- Mobile Controls (Login + Menu Toggle) -->
    <div class="mobile-controls">
      <!-- Mobile Login Button (only when not logged in and menu is closed) -->
      <button mat-button routerLink="/login" class="mobile-login-btn" 
              *ngIf="!(authService.isLoggedIn$ | async) && !isMobileMenuOpen">
        <mat-icon>lock</mat-icon>
        <span>Login</span>
      </button>
      
      <!-- Mobile User Menu (only when logged in and menu is closed) -->
      <button mat-icon-button [matMenuTriggerFor]="mobileUserMenu" class="mobile-user-btn" 
              *ngIf="(authService.isLoggedIn$ | async) && !isMobileMenuOpen">
        <mat-icon>account_circle</mat-icon>
      </button>
      <mat-menu #mobileUserMenu="matMenu">
        <button mat-menu-item routerLink="/profile">
          <mat-icon>person</mat-icon>
          <span>Profile</span>
        </button>
        <button mat-menu-item (click)="logout()">
          <mat-icon>logout</mat-icon>
          <span>Logout</span>
        </button>
      </mat-menu>

      <!-- Mobile Menu Toggle -->
      <button class="mobile-menu-toggle" (click)="toggleMobileMenu()" [class.open]="isMobileMenuOpen">
        <span class="hamburger-line"></span>
        <span class="hamburger-line"></span>
        <span class="hamburger-line"></span>
      </button>
    </div>

    <!-- Navigation - changes based on role -->
    <nav class="main-nav" [class.mobile-open]="isMobileMenuOpen">
      <!-- Mobile menu overlay (click to close) -->
      <div class="mobile-overlay" (click)="closeMobileMenu()" *ngIf="isMobileMenuOpen"></div>
      
      <!-- Guest/Client Navigation -->
      <ng-container *ngIf="!authService.isAdmin()">
        <a routerLink="/apartments" routerLinkActive="active" (click)="closeMobileMenu()">Apartments</a>
        <a routerLink="/contact" routerLinkActive="active" (click)="closeMobileMenu()">Contact</a>
        <a routerLink="/about" routerLinkActive="active" (click)="closeMobileMenu()">About us</a>
        <a routerLink="/reviews" routerLinkActive="active" (click)="closeMobileMenu()">Reviews</a>
        <a routerLink="/booking-history" routerLinkActive="active" (click)="closeMobileMenu()">Booking history</a>
      </ng-container>

      <!-- Admin Navigation -->
      <ng-container *ngIf="authService.isAdmin()">
        <a routerLink="/admin/apartments" routerLinkActive="active" (click)="closeMobileMenu()">Properties</a>
        <a routerLink="/admin/reservations" routerLinkActive="active" (click)="closeMobileMenu()">Reservations</a>
        <a routerLink="/admin/calendar" routerLinkActive="active" (click)="closeMobileMenu()">Calendar</a>
        <a routerLink="/admin/finance" routerLinkActive="active" (click)="closeMobileMenu()">Finance</a>
      </ng-container>

       <!-- Auth Section -->
      <div class="auth-section">
        <ng-container *ngIf="!(authService.isLoggedIn$ | async)">
          <button mat-button routerLink="/login" class="login-btn" (click)="closeMobileMenu()">
            <mat-icon>key</mat-icon>
            Login
          </button>
        </ng-container>
        
        <ng-container *ngIf="authService.isLoggedIn$ | async">
          <button mat-icon-button [matMenuTriggerFor]="userMenu" class="user-menu-btn">
            <mat-icon>account_circle</mat-icon>
          </button>
          <mat-menu #userMenu="matMenu">
            <button mat-menu-item routerLink="/profile" (click)="closeMobileMenu()">
              <mat-icon>person</mat-icon>
              <span>Profile</span>
            </button>
            <button mat-menu-item (click)="logout()">
              <mat-icon>logout</mat-icon>
              <span>Logout</span>
            </button>
          </mat-menu>
        </ng-container>
      </div>
    </nav>
  </div>
</header>