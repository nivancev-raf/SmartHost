<header class="main-header" 
        [class.scrolled]="isScrolled" 
        [class.admin-page]="isAdminPage"
        [class.transparent]="isTransparentPage && !isScrolled">
  <div class="header-content">
    <div class="logo">
      <a routerLink="/">
        <img [src]="(isScrolled || isAdminPage || !isTransparentPage) ? 'images/logo-light-removebg.png' : 'images/logo-dark-removebg.png'" 
             alt="SmartHost Logo" 
             class="logo-image">
        <span class="logo-text">SmartHost</span>
      </a>
    </div>

    <!-- Mobile Controls (Login + Menu Toggle) -->
    <div class="mobile-controls">
      <!-- Mobile Login Button (only when not logged in and menu is closed) -->
      <button mat-button class="mobile-login-btn" 
              (click)="openLoginDialog()"
              *ngIf="!(authService.isLoggedIn$ | async) && !isMobileMenuOpen">
        <mat-icon>lock</mat-icon>
        <span>Login</span>
      </button>
      
      <!-- Mobile Logout Button (only when logged in and menu is closed) -->
      <button mat-button class="mobile-logout-btn" 
              (click)="logout()"
              *ngIf="(authService.isLoggedIn$ | async) && !isMobileMenuOpen">
        <mat-icon>exit_to_app</mat-icon>
        <span>Logout</span>
      </button>

      <!-- Mobile Menu Toggle -->
      <button class="mobile-menu-toggle" (click)="toggleMobileMenu()" [class.open]="isMobileMenuOpen">
        <span class="hamburger-line"></span>
        <span class="hamburger-line"></span>
        <span class="hamburger-line"></span>
      </button>
    </div>

    <!-- Navigation - changes based on role -->
    <nav class="main-nav" [class.mobile-open]="isMobileMenuOpen">
      <!-- Mobile menu overlay (click to close) -->
      <div class="mobile-overlay" (click)="closeMobileMenu()" *ngIf="isMobileMenuOpen"></div>
      
      <!-- Guest/Client Navigation -->
      <ng-container *ngIf="!authService.isAdmin()">
        <a routerLink="/contact" routerLinkActive="active" (click)="closeMobileMenu()">Contact</a>
        <a routerLink="/about" routerLinkActive="active" (click)="closeMobileMenu()">About us</a>
        <a routerLink="/reviews" routerLinkActive="active" (click)="closeMobileMenu()">Reviews</a>
        <a routerLink="/booking-history" routerLinkActive="active" (click)="closeMobileMenu()">Booking history</a>
        <!-- Profile tab for logged in users -->
        <ng-container *ngIf="authService.isLoggedIn$ | async">
          <a routerLink="/profile" routerLinkActive="active" (click)="closeMobileMenu()">
            {{ currentUser?.firstName ? currentUser.firstName + "'s profile" : "Profile" }}
          </a>
        </ng-container>
      </ng-container>

      <!-- Admin Navigation -->
      <ng-container *ngIf="authService.isAdmin()">
        <a routerLink="/admin/apartments" routerLinkActive="active" (click)="closeMobileMenu()">Properties</a>
        <a routerLink="/admin/reservations" routerLinkActive="active" (click)="closeMobileMenu()">Reservations</a>
        <a routerLink="/admin/calendar" routerLinkActive="active" (click)="closeMobileMenu()">Calendar</a>
        <a routerLink="/admin/finance" routerLinkActive="active" (click)="closeMobileMenu()">Finance</a>
        <!-- Profile tab for admin -->
        <a routerLink="/profile" routerLinkActive="active" (click)="closeMobileMenu()">
          {{ currentUser?.firstName ? currentUser.firstName + "'s profile" : "Profile" }}
        </a>
      </ng-container>

       <!-- Auth Section -->
      <div class="auth-section">
        <ng-container *ngIf="!(authService.isLoggedIn$ | async)">
          <button mat-button class="login-btn" (click)="openLoginDialog()">
            <mat-icon>key</mat-icon>
            Login
          </button>
        </ng-container>
        
        <ng-container *ngIf="authService.isLoggedIn$ | async">
          <button mat-button class="logout-btn" (click)="logout()">
            <mat-icon>exit_to_app</mat-icon>
            Logout
          </button>
        </ng-container>
      </div>
    </nav>
  </div>
</header>